<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Star Rating</title>
</head>
<body>
    <!-- 타깃 컨테이너-->
    <div id="react-container"></div>

    <!-- link file and script-->
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://unpkg.com/prop-types/prop-types.js"></script>

    <script type="text/babel">

        const {Component} = React
        const {render} = ReactDOM

        const Star = ({selected=false, onClick=f=>f}) =>
        <div className={(selected)? "star selected" : "star"} onClick={onClick} />

        Star.propTypes = {
            selected: PropTypes.bool,
            onClick: PropTypes.func
        }

        class StarRating extends Component {
            constructor(props) {
                super(props)
                this.state = {
                    starsSelected: props.starsSelected || 0
                }
                this.change = this.change.bind(this)
            }
            change(starsSelected) {
                this.setState({starsSelected})
            }
            render() {
                const {totalStars} = this.props
                const {starsSelected} = this.state
                return (
                    <div className="star-rating">
                        {[...Array(totalStars)].map((n, i) =>
                        <Star key={i}
                        selected = {i<starsSelected}
                        onClick={() => this.change(i+1)}
                        />
                        )}
                        <p> 별점: {starsSelected} / {totalStars} </p>
                    </div>
                )
            }
        }

        StarRating.propTypes = {
            totalStars: PropTypes.number
        }

        StarRating.defaultProps = {
            totalStars: 5
        }

        render(
            <StarRating />,
            document.getElementById('react-container')
        )
    </script>

</body>
</html>